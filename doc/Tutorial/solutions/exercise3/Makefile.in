#****************************************************************************#
#* DIET tutorial dgemm example: Makefile                                    *#
#*                                                                          *#
#*  Author(s):                                                              *#
#*    - Ludovic BERTSCH (Ludovic.Bertsch@ens-lyon.fr)                       *#
#*    - Philippe COMBES (Philippe.Combes@ens-lyon.fr)                       *#
#*                                                                          *#
#* $LICENSE$                                                                *#
#****************************************************************************#

# If the path to Makefile.inc is not right, do feel free to change it !
DIET_HOME = @top_builddir@
include $(DIET_HOME)/include/Makefile.inc

# If your build directory is different from the sources, VPATH helps this
# Makefile to find the sources.
# If you do not understand the last sentence, you may probably be able to
# comment this line without any effect. Anyway, do not care about that.
VPATH=@srcdir@


BLASLIBS  = -lm -lblas -lm -lg2c

all:	client server

client:	client.o
	$(CC) $< $(CCFLAGS) $(DIET_CLIENT_LIBS) -o $@

client.o: client.c
	$(CC) -c $< $(CCFLAGS) $(CCFLAGS_DIET) -o $@

server:	server.o
	$(CC) $< $(CCFLAGS) $(DIET_SERVER_LIBS) $(BLASLIBS) -o $@

server.o: server.c
	$(CC) -c $< $(CCFLAGS) $(CCFLAGS_DIET) -o $@

clean:
	rm -f *.o client server
