
#****************************************************************************#
#* DIET global options for User Makefiles                                   *#
#*                                                                          *#
#*  Author(s):                                                              *#
#*    - Philippe COMBES (Philippe.Combes@ens-lyon.fr)                       *#
#*    - Christophe PERA (Christophe.Pera@ens-lyon.fr)                       *#
#*                                                                          *#
#* $LICENSE$                                                                *#
#****************************************************************************#
#* $Id$
#* $Log$
#* Revision 1.19  2005/10/05 14:19:01  rbolze
#* adding -lstdc++ to DIET_CLIENT_LIBS and DIET_SERVER_LIBS.
#* This is not good, it should be better if there is a test to find if it's needed.
#*
#* Revision 1.18  2005/05/27 08:18:16  mjan
#* Moving JuxMem in a more appropriate place (src/utils)
#* Added log messages for VizDIET
#* Added use of JuxMem in the client side
#*
#* Revision 1.17  2005/05/18 14:18:09  mjan
#* Initial adding of JuxMem support inside DIET. dmat_manips examples tested without JuxMem and with JuxMem
#*
#* Revision 1.16  2003/09/26 17:34:45  pcombes
#* Replace the .so prerequisite for client and SeD by the .a
#*
#* Revision 1.15  2003/09/26 14:05:16  pcombes
#* Get the examples out of the automake chain, to make Makefiles more readable.
#*
#* Revision 1.14  2003/08/01 19:21:26  pcombes
#* Reorganize FAST and omniORB flags.
#*
#* Revision 1.13  2003/07/22 14:47:55  pcombes
#* @ARCH_DIET@ / @OS_DIET@ replaced by autoconf variables.
#*
#* Revision 1.12  2003/07/04 09:47:52  pcombes
#* -Wno-strict-aliasing if supported.
#*
#* Revision 1.9  2003/05/16 08:47:26  cpera
#* Modify FAST compiling/linking parameters.
#****************************************************************************#

# DIET variables

DIET_INSTALLDIR ?= @prefix@
DIET_FLAGS       = -I$(DIET_INSTALLDIR)/include
DIET_CLIENT_LIB ?= -L$(DIET_INSTALLDIR)/lib -lDIET_client
DIET_SED_LIB    ?= -L$(DIET_INSTALLDIR)/lib -lDIET_SeD

# Generic variables
CC	= @CC@
@MAINTAINER_MODE_FALSE@ CCFLAGS_DIET += -O2
@MAINTAINER_MODE_TRUE@  CCFLAGS_DIET += -g -Werror
CCFLAGS_DIET += -Wall @CFLAG_NO_STRICT_ALIASING@ $(DIET_FLAGS)

CXX      = @CXX@
@MAINTAINER_MODE_FALSE@ CXXFLAGS_DIET += -O2
@MAINTAINER_MODE_TRUE@  CXXFLAGS_DIET += -g -Werror
CXXFLAGS_DIET += -Wall @CXXFLAG_NO_STRICT_ALIASING@ $(DIET_FLAGS) \
	         @CXXFLAGS_OMNIORB@ # As long as DIET_mutex is not finished

#adding -lstdc++ this is not good, it should be better if there is a test to find if it is needed.
STDC_LIBS = -lstdc++

DIET_SERVER_LIBS = $(DIET_SED_LIB) @LIBS_OMNIORB@ @LIBS_FAST@ @JUXMEM_LDFLAGS@ $(STDC_LIBS)
DIET_CLIENT_LIBS = $(DIET_CLIENT_LIB) @LIBS_OMNIORB@ @JUXMEM_LDFLAGS@ $(STDC_LIBS)

DIET_CLIENT_SRC_PREREQ = \
	$(DIET_INSTALLDIR)/include/DIET_data.h		\
	$(DIET_INSTALLDIR)/include/DIET_client.h	\
	$(DIET_INSTALLDIR)/include/DIET_grpc.h		\
	$(DIET_INSTALLDIR)/include/DIET_mutex.h
DIET_CLIENT_BIN_PREREQ ?= $(DIET_INSTALLDIR)/lib/libDIET_client.a
DIET_CLIENT_PREREQ = $(DIET_CLIENT_SRC_PREREQ) $(DIET_CLIENT_BIN_PREREQ)

DIET_SERVER_SRC_PREREQ = \
	$(DIET_INSTALLDIR)/include/DIET_data.h		\
	$(DIET_INSTALLDIR)/include/DIET_server.h	\
	$(DIET_INSTALLDIR)/include/DIET_mutex.h
DIET_SERVER_BIN_PREREQ ?= $(DIET_INSTALLDIR)/lib/libDIET_SeD.a
DIET_SERVER_PREREQ = $(DIET_SERVER_SRC_PREREQ) $(DIET_SERVER_BIN_PREREQ)
