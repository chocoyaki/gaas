#****************************************************************************#
#* DIET Batch and parallel jobs example: Makefile                           *#
#*                                                                          *#
#*  Author(s):                                                              *#
#*    - Yves Caniou (Yves.Caniou@ens-lyon.fr)                               *#
#* From Scalapack Makefile						    *#
#*                                                                          *#
#* $LICENSE$                                                                *#
#****************************************************************************#
#* $Id$
#* $Log$
#* Revision 1.2  2005/05/02 16:50:52  ycaniou
#* Added examples of submitting a batch/parallel job
#* Modified Makefile to compile correctly
#*
#* Revision 1.1  2005/04/13 08:27:12  ycaniou
#* Add a fake makefile to allow the correct configuration if --enable-Batch is
#*  not specified.
#*
#****************************************************************************#

##
# The following lines are necessary to include this example in the
# configuration chain of DIET.
#
srcdir = @srcdir@
subdir = src/examples/Batch
SOURCES = batch_client.c batch_server.c parallel_client.c parallel_server.c
HEADERS = 
#
# before.mk includes the right Makefile.inc. Indeed, the user might wish to
# compile this example without installing actually DIET ; thus we cannot assume
# that the Makefile.inc is really in $(prefix): if it is not installed, then we
# will look for it in the build directory.
# If we could be sure that Makefile.inc is installed before compiling this
# example, we would simply add the following line, which is what the user should
# do for his own examples: include $(prefix)/include/Makefile.inc
#
include ../before.mk
#
##

CCFLAGS_DIET += -DHAVE_BATCH

#include $(ELAGI_DIR)/include/elagi/elagi.make
#CCFFLAGS_DIET += $(ELAGI_INC) 
#DIET_SERVER_LIBS += $(ELAGI_LIBS)

PROGRAMS = batch_client batch_server parallel_client parallel_server

all:    $(PROGRAMS)

parallel_client:	$(srcdir)/parallel_client.c $(DIET_CLIENT_PREREQ)
	$(CC) $(CCFLAGS_DIET) $< $(DIET_CLIENT_LIBS) -o $@
	
batch_client:	$(srcdir)/batch_client.c $(DIET_CLIENT_PREREQ)
	$(CC) $(CCFLAGS_DIET) $< $(DIET_CLIENT_LIBS) -o $@
		
parallel_server:	$(srcdir)/parallel_server.c $(DIET_SERVER_PREREQ)
	$(CC) $(CCFLAGS_DIET) $< $(DIET_SERVER_LIBS) -o $@

batch_server:	$(srcdir)/batch_server.c $(DIET_SERVER_PREREQ)
	$(CC) $(CCFLAGS_DIET) $< $(DIET_SERVER_LIBS) -o $@

