#****************************************************************************#

##
# The following lines are necessary to include this example in the
# configuration chain of DIET.
#
srcdir = @srcdir@
subdir = src/examples/workflow
SOURCES = client1.c double.c succ.c sum.c mat_op.c \
	mul_succ.c mul_sum.c \
	heft.cc

HEADERS = 
#
# before.mk includes the right Makefile.inc. Indeed, the user might wish to
# compile this example without installing actually DIET ; thus we cannot assume
# that the Makefile.inc is really in $(prefix): if it is not installed, then we
# will look for it in the build directory.
# If we could be sure that Makefile.inc is installed before compiling this
# example, we would simply add the following line, which is what the user should
# do for his own examples: include $(prefix)/include/Makefile.inc
#
include ../before.mk
#
##

CCFLAGS_DIET += -DHAVE_WORKFLOW -DDEBUG_WF 

PROGRAMS = client1  succ double sum client2 mat_op mul_sum mul_succ \
	client_float  succ_float

all: 	$(PROGRAMS)

client1: client1.o heft.o $(DIET_CLIENT_PREREQ)
	$(CC) $(CCFLAGS_DIET) client1.o heft.o $(DIET_CLIENT_LIBS) -o $@

client1.o: client1.c $(DIET_CLIENT_PREREQ)
	$(CC) -c $(CCFLAGS_DIET) $<  -o $@
heft.o: heft.cc $(DIET_CLIENT_PREREQ)
	$(CXX) -c $(CCFLAGS_DIET) -I/home/hektor/merge-diet/diet/src/utils \
	-I/home/hektor/merge-diet/diet/build/src/CORBA/idl \
	-I$(OMNIORB_HOME)/include \
	$<  -o $@

double: double.c $(DIET_SERVER_PREREQ)
	$(CC) $(CCFLAGS_DIET) $< $(DIET_SERVER_LIBS) -o $@

succ: succ.c $(DIET_SERVER_PREREQ)
	$(CC) $(CCFLAGS_DIET) $< $(DIET_SERVER_LIBS) -o $@

sum: sum.c $(DIET_SERVER_PREREQ)
	$(CC) $(CCFLAGS_DIET) $< $(DIET_SERVER_LIBS) -o $@

mat_op: mat_op.c $(DIET_SERVER_PREREQ)
	$(CC) $(CCFLAGS_DIET) -g -I $(top_builddir)/include $<	\
	      $(DIET_SERVER_LIBS)  -o $@

client2: client2.c $(DIET_CLIENT_PREREQ)
	$(CC) $(CCFLAGS_DIET) $< $(DIET_CLIENT_LIBS) -o $@

mul_succ: mul_succ.c $(DIET_SERVER_PREREQ)
	$(CC) $(CCFLAGS_DIET) $< $(DIET_SERVER_LIBS) -o $@

mul_sum: mul_sum.c $(DIET_SERVER_PREREQ)
	$(CC) $(CCFLAGS_DIET) $< $(DIET_SERVER_LIBS) -o $@

client_float: client_float.c $(DIET_CLIENT_PREREQ)
	$(CC) $(CCFLAGS_DIET) $< $(DIET_CLIENT_LIBS) -o $@

succ_float: succ_float.c $(DIET_SERVER_PREREQ)
	$(CC) $(CCFLAGS_DIET) $< $(DIET_SERVER_LIBS) -o $@

