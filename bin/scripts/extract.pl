#!/usr/bin/perl
#****************************************************************************#
#* Extract data from stat logfile generated by DIET statistics module       *#
#*                                                                          *#
#*  Author(s):                                                              *#
#*    - Eddy Caron (Eddy.Caron@ens-lyon.fr)                                 *#
#*                                                                          *#
#* $LICENSE$                                                                *#
#****************************************************************************#
#* $Id$
#* $Log$
#* Revision 1.1  2003/09/22 21:06:05  pcombes
#* script becomes scripts.
#*
#* Revision 1.2  2003/05/27 12:44:40  pkchouha
#* *** empty log message ***
#*
#* Revision 1.1  2003/05/12 14:45:44  ecaron
#* External tool for extract data from DIET statistics logfile
#*
#****************************************************************************#

my($string)=0;   
$num=0;
while (<>) {
	$lines = $_;
	chomp $lines;
#	print "LINE: $lines\n";
	( @mem[$num], @mem[$num+1], @mem[$num+2] ) = split /\|/, $lines;
	if (@mem[$num+1]=~ "IN")
	{
	   $num=$num+3;
	}
	else
	{
	   if (@mem[$cpt-1] =~ @mem[$num+2])
	   {
	      $time=@mem[$num]-@mem[$num-3];
	      printf "%s \t: %3.6f\n",@mem[$num+2],$time;
	
# To calculate number of requests submitted in one second	
	      if($string == 0 ){
	         my($div)=1/$time;
	         printf "Number of request submitted per second \t \t: %3.6f \n", $div;}
	   
	      $string++;


# To calculate number of requests solved(submission+solve+call) in one second
#	      $string=@mem[$num+2];
#	      if($string eq @mem[3] ){
#		      my($div)=1/$time;
#		      printf "Number of request responded per second \t \t: %3.6f \n", $div;}

           };
	   $num=$num-3;
	};
};
print "That's all Falks !\n";







